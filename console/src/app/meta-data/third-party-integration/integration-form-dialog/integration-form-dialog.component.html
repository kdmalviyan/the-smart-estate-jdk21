<div class="modal-header editRowModal">
    <h4 class="modal-title" id="modal-basic-title">
        <div class="modal-header ">
            <div class="modal-about">
                <div class="font-weight-bold p-t-10 font-17">
                    {{Action | titlecase}} Integration Details
                </div>
            </div>
        </div>
    </h4>
    <button (click)="onCloseModal()" aria-label="Close" class="close" type="button">
        <span aria-hidden="true"><i class="material-icons">close</i></span>
    </button>
</div>
<div class="modal-body">
    <form class="register-form" [formGroup]="integrationForm">
        <!-- <div class="input-field col s12 d-none">
            <input class="form-control" formControlName="id" type="hidden">
        </div> -->
        <div class="row">
            <div class="col-xl-6 col-lg-6 col-md-6 col-sm-6 mb-2">
                <mat-form-field appearance="outline" class="example-full-width">
                    <mat-label>Name</mat-label>
                    <input matInput formControlName="name">
                    <mat-error>
                        Name is required!
                    </mat-error>
                </mat-form-field>
            </div>
            <div class="col-xl-6 col-lg-6 col-md-6 col-sm-6 mb-2">
                <mat-form-field appearance="outline" class="example-full-width">
                    <mat-label>URL</mat-label>
                    <input matInput formControlName="url">
                    <mat-error>
                        URL is required!
                    </mat-error>
                </mat-form-field>
            </div>
        </div>

        <div class="row">
            <div class="col-xl-6 col-lg-6 col-md-6 col-sm-6 mb-2">
                <mat-form-field appearance="outline" class="example-full-width">
                    <mat-label>Auth Type</mat-label>
                    <mat-select formControlName="authType">
                        <mat-option *ngFor="let type of AuthTypes" [value]="type.value">
                            {{type.name}}
                        </mat-option>
                    </mat-select>
                    <mat-error>
                        Auth Type is required!
                    </mat-error>
                </mat-form-field>
            </div>
            <div class="col-xl-6 col-lg-6 col-md-6 col-sm-6 mb-2">
                <mat-form-field appearance="outline" class="example-full-width">
                    <mat-label>HTTP Method</mat-label>
                    <mat-select formControlName="httpMethod">
                        <mat-option *ngFor="let method of HttpMethods" [value]="method.value">
                            {{method.name}}
                        </mat-option>
                    </mat-select>
                    <mat-error>
                        HTTP Method is required!
                    </mat-error>
                </mat-form-field>
            </div>
        </div>

        <div class="row formsArray">
            <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 mb-2 heading">
                <strong>
                    <h4>Params
                        <span>
                            <button mat-icon-button (click)="addParamsControls();$event.preventDefault()">
                                <mat-icon>add_circle</mat-icon>
                            </button>
                        </span>
                    </h4>
                </strong>
            </div>
            <ng-container formArrayName="params" *ngFor="let param of ParamControls.controls; let i = index">
                <ng-container [formGroupName]="i">
                    <div class="col-xl-5 col-lg-5 col-md-5 col-sm-5 mb-2">
                        <mat-form-field appearance="outline" class="example-full-width">
                            <mat-label>Param Key</mat-label>
                            <input matInput formControlName="paramKey">
                            <mat-error>
                                Key is required!
                            </mat-error>
                        </mat-form-field>
                    </div>
                    <div class="col-xl-6 col-lg-6 col-md-6 col-sm-6 mb-2">
                        <mat-form-field appearance="outline" class="example-full-width">
                            <mat-label>Param Value</mat-label>
                            <input matInput formControlName="paramValue">
                            <mat-error>
                                Value is required!
                            </mat-error>
                        </mat-form-field>
                    </div>
                    <div class="col-xl-1 col-lg-1 col-md-1 col-sm-1 mb-2">
                        <button mat-icon-button color="warning" (click)="removeParamsControls(i)">
                            <mat-icon>delete</mat-icon>
                        </button>
                    </div>
                </ng-container>
            </ng-container>
        </div>

        <div class="row formsArray">
            <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 mb-2 heading">
                <strong>
                    <h4>Field Mappings
                        <span>
                            <button mat-icon-button (click)="addFieldControls();$event.preventDefault()">
                                <mat-icon>add_circle</mat-icon>
                            </button>
                        </span>
                    </h4>
                </strong>
            </div>
            <ng-container formArrayName="fieldsMappers" *ngFor="let param of FieldControls.controls; let i = index">
                <ng-container [formGroupName]="i">
                    <div class="col-xl-5 col-lg-5 col-md-5 col-sm-5 mb-2">
                        <mat-form-field appearance="outline" class="example-full-width">
                            <mat-label>System key</mat-label>
                            <input matInput formControlName="propKey">
                            <mat-error>
                                Key is required!
                            </mat-error>
                        </mat-form-field>
                    </div>
                    <div class="col-xl-6 col-lg-6 col-md-6 col-sm-6 mb-2">
                        <mat-form-field appearance="outline" class="example-full-width">
                            <mat-label>Third party key</mat-label>
                            <input matInput formControlName="propValue">
                            <mat-error>
                                Third party key is required!
                            </mat-error>
                        </mat-form-field>
                    </div>
                    <div class="col-xl-1 col-lg-1 col-md-1 col-sm-1 mb-2">
                        <button mat-icon-button color="warning" (click)="removeFieldsControls(i)">
                            <mat-icon>delete</mat-icon>
                        </button>
                    </div>
                </ng-container>
            </ng-container>
        </div>

        <div class="row formsArray">
            <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 mb-2 heading">
                <strong>
                    <h4>Headers
                        <span>
                            <button mat-icon-button (click)="addHeadersControls();$event.preventDefault()">
                                <mat-icon>add_circle</mat-icon>
                            </button>
                        </span>
                    </h4>
                </strong>
            </div>
            <ng-container formArrayName="headers" *ngFor="let param of HeaderControls.controls; let i = index">
                <ng-container [formGroupName]="i">
                    <div class="col-xl-5 col-lg-5 col-md-5 col-sm-5 mb-2">
                        <mat-form-field appearance="outline" class="example-full-width">
                            <mat-label>Header Key</mat-label>
                            <input matInput formControlName="headerKey">
                            <mat-error>
                                Key is required!
                            </mat-error>
                        </mat-form-field>
                    </div>
                    <div class="col-xl-6 col-lg-6 col-md-6 col-sm-6 mb-2">
                        <mat-form-field appearance="outline" class="example-full-width">
                            <mat-label>Header Value</mat-label>
                            <input matInput formControlName="headerValue">
                            <mat-error>
                                Value is required!
                            </mat-error>
                        </mat-form-field>
                    </div>
                    <div class="col-xl-1 col-lg-1 col-md-1 col-sm-1 mb-2">
                        <button mat-icon-button color="warning" (click)="removeHeadersControls(i)">
                            <mat-icon>delete</mat-icon>
                        </button>
                    </div>
                </ng-container>
            </ng-container>
        </div>

        <div class="row">
            <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 mb-2">
                <button [disabled]="!integrationForm.valid" class="btn-space" color="primary" mat-raised-button
                    (click)="submitForm()">Submit
                </button>
                <button data-dismiss="modal" mat-button type="button" (click)="onCloseModal()">Cancel
                </button>
            </div>
        </div>
    </form>
</div>